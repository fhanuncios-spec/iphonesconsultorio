<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle de iPhones</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, Arial;
  background: #f2f2f7;
  padding: 12px;
}

/* ===== TOPO ===== */
.header {
  background: #0f172a;
  color: #fff;
  padding: 14px;
  border-radius: 14px;
  margin-bottom: 12px;
  text-align: center;
}

.header .resumo-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 10px;
}

.header .box {
  background: #1e293b;
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
}

#resumoVendedor {
  margin-top: 10px;
  background: #22c55e;
  color: #ffffff;
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
  display: none;
}

/* ===== RESUMO M√äS ===== */
#resumoMes {
  margin-top: 10px;
  background: #0b1220;
  color: #ffffff;
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
  text-align: left;
  display: none;
}

#resumoMes .linha {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 4px 0;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
#resumoMes .linha:last-child { border-bottom: none; }

#resumoMes .total {
  font-weight: bold;
  margin-bottom: 6px;
}
#resumoMes .sub {
  opacity: .95;
  font-size: 12px;
  margin-bottom: 8px;
}

/* ===== RESUMO PER√çODO ===== */
#resumoPeriodo {
  margin-top: 10px;
  background: #111827;
  color: #ffffff;
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
  text-align: left;
  display: none;
}

#resumoPeriodo .linha {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 4px 0;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
#resumoPeriodo .linha:last-child { border-bottom: none; }

#resumoPeriodo .total {
  font-weight: bold;
  margin-bottom: 6px;
}
#resumoPeriodo .sub {
  opacity: .95;
  font-size: 12px;
  margin-bottom: 8px;
}

/* ===== FILTROS ===== */
.filtros {
  background: #fff;
  padding: 12px;
  border-radius: 14px;
  margin-bottom: 12px;
}

select, input {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

/* ===== LISTA ===== */
#lista {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

@media (max-width: 380px) {
  #lista {
    grid-template-columns: 1fr;
  }
}

/* ===== CARD ===== */
.card {
  background: #fff;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
}

.card.disponivel {
  background: #16a34a;
  color: #ffffff;
}

.card.disponivel .info div {
  background: rgba(255,255,255,0.15);
  color: #ffffff;
}

.card h3 {
  margin: 0 0 6px 0;
  font-size: 14px;
}

.tags {
  font-size: 11px;
  margin-bottom: 6px;
}

.tag {
  padding: 4px 6px;
  border-radius: 6px;
  font-weight: bold;
}

.entrada { background: #e0f2fe; color: #0369a1; }
.vendido { background: #dcfce7; color: #166534; }
.nao { background: #15803d; color: #ffffff; }

.info {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  font-size: 12px;
}

.info div {
  background: #f7f7f7;
  padding: 6px;
  border-radius: 6px;
}

.lucro {
  margin-top: 8px;
  padding: 8px;
  border-radius: 10px;
  background: #0f172a;
  color: #ffffff;
  font-weight: bold;
  text-align: center;
  font-size: 13px;
}

/* ===== CONTROLE BALC√ÉO/COMISS√ÉO ===== */
.comissaoBox {
  margin-top: 8px;
  background: rgba(15, 23, 42, 0.08);
  padding: 8px;
  border-radius: 10px;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.comissaoBox label {
  display: flex;
  align-items: center;
  gap: 8px;
  user-select: none;
}
.comissaoBox input[type="checkbox"]{
  width: 18px;
  height: 18px;
  margin: 0;
}
.comissaoBadge {
  background: #0f172a;
  color: #fff;
  padding: 6px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: bold;
  white-space: nowrap;
}
</style>
</head>

<body>

<div class="header">
  <h3 id="lucroMes">üí∞ Selecione um m√™s</h3>

  <div class="resumo-grid">
    <div class="box" id="totalGeral">Total: 0</div>
    <div class="box" id="totalVendidos">Vendidos: 0</div>
    <div class="box" id="totalDisponiveis">Dispon√≠veis: 0</div>
  </div>

  <!-- ‚úÖ Resumo do m√™s -->
  <div id="resumoMes"></div>

  <!-- ‚úÖ Resumo por per√≠odo -->
  <div id="resumoPeriodo"></div>

  <div id="resumoVendedor"></div>
</div>

<div class="filtros">
  <select id="vendedor"></select>

  <select id="status">
    <option value="">Todos</option>
    <option value="SIM">Somente vendidos</option>
    <option value="NAO">Somente dispon√≠veis</option>
  </select>

  <input type="month" id="mes">

  <input type="date" id="dataIni" placeholder="Data inicial">
  <input type="date" id="dataFim" placeholder="Data final">
</div>

<div id="lista"></div>

<script>
const URL = "https://script.google.com/macros/s/AKfycbwuroYkA_84ft4-fCOheB7_euWSHZrNuPlX_mZA97zekM2KAAss-7LCGhPhL401SQ2E/exec";
let dados = [];

const COMISSAO_VALOR = 30;
const NOME_RAQUEL = "Raquel";
const LS_KEY = "comissao_balcao_overrides_v2";

/* ===============================
   Persist√™ncia (LocalStorage)
   =============================== */
function loadOverrides() {
  try { return JSON.parse(localStorage.getItem(LS_KEY) || "{}") || {}; }
  catch(e){ return {}; }
}
function saveOverrides(map) {
  try { localStorage.setItem(LS_KEY, JSON.stringify(map || {})); } catch(e){}
}
let overrides = loadOverrides();

/* Chave est√°vel por linha */
function makeRowKey(l) {
  return [
    String(l[0] || ""),
    String(l[1] || ""),
    String(l[2] || ""),
    String(l[4] || ""),
    String(l[5] || ""),
    String(l[8] || ""),
    String(l[10] || ""),
    String(l[13] || "")
  ].join("|");
}

/* ‚úÖ Balc√£o Raquel = atendimento balc√£o (R$30) e comiss√£o vai pra Raquel */
function isBalcaoRaquel(l) {
  const key = makeRowKey(l);
  return !!(overrides[key] && overrides[key].balcaoRaquel === true);
}

/* Recebedor da comiss√£o (para relat√≥rios de comiss√£o) */
function getRecebedorComissao(l) {
  return isBalcaoRaquel(l) ? NOME_RAQUEL : (l[1] || "");
}

/* Lucro l√≠quido = lucro bruto - (somente comiss√£o/atendimento do balc√£o da Raquel) */
function getLucroLiquido(l, lucroBruto) {
  return lucroBruto - (isBalcaoRaquel(l) ? COMISSAO_VALOR : 0);
}

/* Parse robusto: Date, ISO, e BR dd/mm/aaaa */
function parseDate(value) {
  if (!value) return null;

  if (Object.prototype.toString.call(value) === "[object Date]") {
    return isNaN(value) ? null : value;
  }

  const d1 = new Date(value);
  if (!isNaN(d1)) return d1;

  const s = String(value).trim();
  const m = s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);
  if (m) {
    const dd = parseInt(m[1], 10);
    const mm = parseInt(m[2], 10) - 1;
    let yy = parseInt(m[3], 10);
    if (yy < 100) yy += 2000;
    const d2 = new Date(yy, mm, dd);
    return isNaN(d2) ? null : d2;
  }
  return null;
}

function formatarData(data) {
  const d = parseDate(data);
  if (!d) return "-";
  return d.toLocaleDateString("pt-BR");
}

function getMesYYYYMM(dateValue) {
  const d = parseDate(dateValue);
  if (!d) return "";
  return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2,"0")}`;
}

function parseDateInputIni(v) {
  if (!v) return null;
  const d = new Date(v + "T00:00:00");
  return isNaN(d) ? null : d;
}
function parseDateInputFim(v) {
  if (!v) return null;
  const d = new Date(v + "T23:59:59");
  return isNaN(d) ? null : d;
}

fetch(URL)
  .then(r => r.json())
  .then(r => {
    dados = r;
    carregarVendedores();
    render();
  });

document.getElementById("vendedor").onchange = render;
document.getElementById("status").onchange = render;
document.getElementById("mes").onchange = render;
document.getElementById("dataIni").onchange = render;
document.getElementById("dataFim").onchange = render;

function carregarVendedores() {
  const select = document.getElementById("vendedor");
  const vendedores = [...new Set(dados.slice(1).map(l => l[1]).filter(Boolean))];

  select.innerHTML = `<option value="">Todos vendedores</option>`;
  vendedores.forEach(v => {
    select.innerHTML += `<option value="${v}">${v}</option>`;
  });
}

/* ===============================
   RESUMO DO M√äS (ATUALIZADO)
   - Mostra:
     1) total vendidos no m√™s
     2) por vendedor (no registro)
     3) comiss√£o da Raquel (balc√£o) = atendimentos balc√£o * 30
     4) lucro bruto do m√™s (SEM descontar nada)
     5) lucro l√≠quido do m√™s (descontando somente balc√£o da Raquel)
   =============================== */
function renderResumoMes(mesFiltro) {
  const box = document.getElementById("resumoMes");

  if (!mesFiltro) {
    box.style.display = "none";
    box.innerHTML = "";
    return;
  }

  const vendedores = [...new Set(dados.slice(1).map(l => l[1]).filter(Boolean))];
  const vendidosPorVendedor = {};
  vendedores.forEach(v => vendidosPorVendedor[v] = 0);

  let totalVendidosMes = 0;
  let lucroBrutoMes = 0;
  let lucroLiquidoMes = 0;

  let atendimentosBalcaoRaquelMes = 0; // ‚úÖ quantidade de balc√£o (R$30 cada)

  dados.slice(1).forEach(l => {
    const vendedor = l[1];
    const vendido = (l[11] || "").toUpperCase() === "SIM" ? "SIM" : "NAO";
    if (vendido !== "SIM") return;

    const mesVenda = getMesYYYYMM(l[13]);
    if (mesVenda !== mesFiltro) return;

    const valorEntrada = Number(l[8]) || 0;
    const custoReparo = Number(l[9]) || 0;
    const valorVenda = Number(l[10]) || 0;
    const custosAdicionais = Number(l[12]) || 0;
    const lucro = valorVenda - valorEntrada - custoReparo - custosAdicionais;

    totalVendidosMes++;
    lucroBrutoMes += lucro;

    if (vendedor) {
      if (!vendidosPorVendedor[vendedor]) vendidosPorVendedor[vendedor] = 0;
      vendidosPorVendedor[vendedor]++;
    }

    const balcao = isBalcaoRaquel(l);
    if (balcao) atendimentosBalcaoRaquelMes++;

    lucroLiquidoMes += getLucroLiquido(l, lucro);
  });

  const comissaoRaquelMes = atendimentosBalcaoRaquelMes * COMISSAO_VALOR;

  let html = `
    <div class="total">üì¶ Vendidos no m√™s: <b>${totalVendidosMes}</b></div>
    <div class="sub">
      üóìÔ∏è ${mesFiltro}
      ‚Ä¢ Atend. balc√£o (Raquel): <b>${atendimentosBalcaoRaquelMes}</b> (R$ ${COMISSAO_VALOR} cada) = <b>R$ ${comissaoRaquelMes}</b>
      ‚Ä¢ Lucro bruto: <b>R$ ${lucroBrutoMes}</b>
      ‚Ä¢ Lucro l√≠quido (descontando s√≥ balc√£o da Raquel): <b>R$ ${lucroLiquidoMes}</b>
    </div>
  `;

  html += `<div class="sub" style="margin-top:6px;">üë• Por vendedor (no registro):</div>`;
  Object.entries(vendidosPorVendedor)
    .sort((a,b) => (b[1]||0) - (a[1]||0))
    .forEach(([v, qtd]) => {
      html += `<div class="linha"><span>${v}</span><span><b>${qtd}</b></span></div>`;
    });

  box.innerHTML = html;
  box.style.display = "block";
}

/* ===============================
   RESUMO POR PER√çODO (ATUALIZADO)
   - Mostra:
     1) vendidos no per√≠odo
     2) por vendedor (no registro)
     3) atend. balc√£o (Raquel) e comiss√£o dela (qtd*30)
     4) lucro bruto per√≠odo
     5) lucro l√≠quido per√≠odo (descontando s√≥ balc√£o da Raquel)
   =============================== */
function renderResumoPeriodo(dtIni, dtFim) {
  const box = document.getElementById("resumoPeriodo");

  if (!dtIni && !dtFim) {
    box.style.display = "none";
    box.innerHTML = "";
    return;
  }

  const vendedores = [...new Set(dados.slice(1).map(l => l[1]).filter(Boolean))];
  const vendidosPorVendedor = {};
  vendedores.forEach(v => vendidosPorVendedor[v] = 0);

  let totalVendidosPeriodo = 0;
  let lucroBrutoPeriodo = 0;
  let lucroLiquidoPeriodo = 0;

  let atendimentosBalcaoRaquelPeriodo = 0;

  dados.slice(1).forEach(l => {
    const vendedor = l[1];
    const vendido = (l[11] || "").toUpperCase() === "SIM" ? "SIM" : "NAO";
    if (vendido !== "SIM") return;

    const dtVenda = parseDate(l[13]);
    if (!dtVenda) return;

    if (dtIni && dtVenda < dtIni) return;
    if (dtFim && dtVenda > dtFim) return;

    const valorEntrada = Number(l[8]) || 0;
    const custoReparo = Number(l[9]) || 0;
    const valorVenda = Number(l[10]) || 0;
    const custosAdicionais = Number(l[12]) || 0;
    const lucro = valorVenda - valorEntrada - custoReparo - custosAdicionais;

    totalVendidosPeriodo++;
    lucroBrutoPeriodo += lucro;

    if (vendedor) {
      if (!vendidosPorVendedor[vendedor]) vendidosPorVendedor[vendedor] = 0;
      vendidosPorVendedor[vendedor]++;
    }

    const balcao = isBalcaoRaquel(l);
    if (balcao) atendimentosBalcaoRaquelPeriodo++;

    lucroLiquidoPeriodo += getLucroLiquido(l, lucro);
  });

  const iniTxt = dtIni ? dtIni.toLocaleDateString("pt-BR") : "‚Äî";
  const fimTxt = dtFim ? dtFim.toLocaleDateString("pt-BR") : "‚Äî";
  const comissaoRaquelPeriodo = atendimentosBalcaoRaquelPeriodo * COMISSAO_VALOR;

  let html = `
    <div class="total">üì¶ Vendidos no per√≠odo: <b>${totalVendidosPeriodo}</b></div>
    <div class="sub">
      üìÖ ${iniTxt} at√© ${fimTxt}
      ‚Ä¢ Atend. balc√£o (Raquel): <b>${atendimentosBalcaoRaquelPeriodo}</b> (R$ ${COMISSAO_VALOR} cada) = <b>R$ ${comissaoRaquelPeriodo}</b>
      ‚Ä¢ Lucro bruto: <b>R$ ${lucroBrutoPeriodo}</b>
      ‚Ä¢ Lucro l√≠quido (descontando s√≥ balc√£o da Raquel): <b>R$ ${lucroLiquidoPeriodo}</b>
    </div>
  `;

  Object.entries(vendidosPorVendedor)
    .sort((a,b) => (b[1]||0) - (a[1]||0))
    .forEach(([v, qtd]) => {
      html += `<div class="linha"><span>${v}</span><span><b>${qtd}</b></span></div>`;
    });

  box.innerHTML = html;
  box.style.display = "block";
}

function render() {
  const lista = document.getElementById("lista");
  const vendedorFiltro = document.getElementById("vendedor").value;
  const statusFiltro = document.getElementById("status").value;
  const mesFiltro = document.getElementById("mes").value;

  const dtIni = parseDateInputIni(document.getElementById("dataIni").value);
  const dtFim = parseDateInputFim(document.getElementById("dataFim").value);
  const periodoAtivo = !!dtIni || !!dtFim;

  lista.innerHTML = "";

  let total = 0, vendidos = 0, disponiveis = 0;
  let lucroMesBruto = 0, lucroMesLiquido = 0;

  // resumo do vendedor filtrado (no nome)
  let vendidosVendedorNoNome = 0;
  let lucroVendedorBruto = 0;
  let lucroVendedorLiquido = 0;

  // ‚úÖ para mostrar atendimentos balc√£o da Raquel no filtro do vendedor (se escolher Raquel)
  let atendimentosBalcaoRaquelNoFiltro = 0;
  let comissaoRaquelNoFiltro = 0;

  const itens = [];

  dados.slice(1).forEach(l => {
    const vendedor = l[1];
    const vendido = (l[11] || "").toUpperCase() === "SIM" ? "SIM" : "NAO";

    if (vendedorFiltro && vendedorFiltro !== vendedor) return;
    if (statusFiltro === "SIM" && vendido !== "SIM") return;
    if (statusFiltro === "NAO" && vendido === "SIM") return;

    if (periodoAtivo) {
      if (vendido !== "SIM") return;
      const dtVenda = parseDate(l[13]);
      if (!dtVenda) return;
      if (dtIni && dtVenda < dtIni) return;
      if (dtFim && dtVenda > dtFim) return;
    }

    total++;
    vendido === "SIM" ? vendidos++ : disponiveis++;

    const cliente = l[2] || "-";
    const dataEntrada = formatarData(l[0]);
    const dataVenda = formatarData(l[13]);

    const valorEntrada = Number(l[8]) || 0;
    const custoReparo = Number(l[9]) || 0;
    const valorVenda = Number(l[10]) || 0;
    const custosAdicionais = Number(l[12]) || 0;

    const lucro = valorVenda - valorEntrada - custoReparo - custosAdicionais;
    const lucroLiq = getLucroLiquido(l, lucro);

    const mesVenda = getMesYYYYMM(l[13]);

    // topo do m√™s
    if (vendido === "SIM" && mesFiltro && mesVenda === mesFiltro) {
      lucroMesBruto += lucro;
      lucroMesLiquido += lucroLiq;
    }

    // resumo do vendedor selecionado (no nome)
    if (vendido === "SIM" && vendedorFiltro === vendedor) {
      if (!mesFiltro || mesVenda === mesFiltro) {
        vendidosVendedorNoNome++;
        lucroVendedorBruto += lucro;
        lucroVendedorLiquido += lucroLiq;

        // se o filtro for Raquel, contar os atendimentos do balc√£o marcados
        if (vendedorFiltro === NOME_RAQUEL && isBalcaoRaquel(l)) {
          atendimentosBalcaoRaquelNoFiltro++;
        }
      }
    }

    itens.push({
      row: l,
      vendido,
      cliente,
      dataEntrada,
      dataVenda,
      valorEntrada,
      custoReparo,
      valorVenda,
      custosAdicionais,
      lucro,
      lucroLiq,
      recebedor: getRecebedorComissao(l) || "-",
      balcaoRaquel: isBalcaoRaquel(l),
      dataEntradaTS: (parseDate(l[0]) ? parseDate(l[0]).getTime() : 0)
    });
  });

  // ‚úÖ comiss√µes balc√£o do filtro (apenas se for Raquel)
  comissaoRaquelNoFiltro = atendimentosBalcaoRaquelNoFiltro * COMISSAO_VALOR;

  // Ordena: Dispon√≠veis primeiro, depois por DataEntrada desc
  itens.sort((a, b) => {
    const ga = (a.vendido === "NAO") ? 0 : 1;
    const gb = (b.vendido === "NAO") ? 0 : 1;
    if (ga !== gb) return ga - gb;
    return (b.dataEntradaTS || 0) - (a.dataEntradaTS || 0);
  });

  itens.forEach(item => {
    const l = item.row;
    const key = makeRowKey(l);

    const comissaoHtml = (item.vendido === "SIM") ? `
      <div class="comissaoBox">
        <label>
          <input
            type="checkbox"
            data-key="${key}"
            ${item.balcaoRaquel ? "checked" : ""}
            onchange="toggleBalcaoRaquel(this)"
          />
          Balc√£o (Raquel atendeu) ‚Ä¢ R$ ${COMISSAO_VALOR}
        </label>
        <span class="comissaoBadge">Recebe: ${item.recebedor}</span>
      </div>
    ` : "";

    lista.innerHTML += `
      <div class="card ${item.vendido === "NAO" ? "disponivel" : ""}">
        <h3>üì± ${l[4]} ‚Ä¢ ${l[5]}</h3>

        <div class="tags">
          <span class="tag entrada">${l[3]}</span>
          <span class="tag ${item.vendido === "SIM" ? "vendido" : "nao"}">
            ${item.vendido === "SIM" ? "VENDIDO" : "DISPON√çVEL"}
          </span>
        </div>

        <div class="info">
          <div><b>Vendedor:</b> ${l[1] || "-"}</div>
          <div><b>Recebe comiss√£o:</b> ${item.recebedor}</div>
          <div><b>Cliente:</b> ${item.cliente}</div>
          <div><b>Bateria:</b> ${l[7]}%</div>
          <div><b>Compra:</b> ${item.dataEntrada}</div>
          <div><b>Venda:</b> ${item.dataVenda}</div>
          <div><b>Pago:</b> R$ ${item.valorEntrada}</div>
          <div><b>Valor venda:</b> R$ ${item.valorVenda}</div>
          <div><b>Reparo:</b> R$ ${item.custoReparo}</div>
          <div><b>Adicional:</b> R$ ${item.custosAdicionais}</div>
        </div>

        ${comissaoHtml}

        <div class="lucro">
          üí∞ Lucro bruto: R$ ${item.lucro}
          ${item.balcaoRaquel ? ` ‚Ä¢ L√≠quido (descontado R$ ${COMISSAO_VALOR} balc√£o Raquel): R$ ${item.lucroLiq}` : ""}
        </div>
      </div>
    `;
  });

  document.getElementById("totalGeral").innerText = `Total: ${total}`;
  document.getElementById("totalVendidos").innerText = `Vendidos: ${vendidos}`;
  document.getElementById("totalDisponiveis").innerText = `Dispon√≠veis: ${disponiveis}`;

  // ‚úÖ topo do m√™s: agora mostra claramente bruto e l√≠quido + comiss√£o da Raquel (balc√£o)
  // (o total de atendimentos balc√£o e comiss√£o aparece no resumoMes)
  document.getElementById("lucroMes").innerText =
    mesFiltro
      ? `üí∞ ${mesFiltro} ‚Ä¢ Lucro bruto: R$ ${lucroMesBruto} ‚Ä¢ Lucro l√≠quido (descontando balc√£o Raquel): R$ ${lucroMesLiquido}`
      : "üí∞ Selecione um m√™s";

  renderResumoMes(mesFiltro);
  renderResumoPeriodo(dtIni, dtFim);

  // ‚úÖ resumo vendedor (mantido + ajustado para mostrar balc√£o da Raquel quando filtrar Raquel)
  const resumo = document.getElementById("resumoVendedor");
  if (vendedorFiltro) {
    resumo.style.display = "block";

    let extraRaquel = "";
    if (vendedorFiltro === NOME_RAQUEL) {
      extraRaquel = ` ‚Ä¢ Atend. balc√£o (marcados): ${atendimentosBalcaoRaquelNoFiltro} ‚Ä¢ Comiss√£o balc√£o: R$ ${comissaoRaquelNoFiltro}`;
    }

    resumo.innerText =
      `üë§ ${vendedorFiltro} ‚Ä¢ Vendidos (no nome): ${vendidosVendedorNoNome} ‚Ä¢ Lucro bruto: R$ ${lucroVendedorBruto} ‚Ä¢ Lucro l√≠quido (descontando balc√£o Raquel): R$ ${lucroVendedorLiquido}${extraRaquel}`;
  } else {
    resumo.style.display = "none";
  }
}

/* global */
function toggleBalcaoRaquel(checkbox) {
  const key = checkbox.getAttribute("data-key");
  if (!key) return;

  overrides = loadOverrides();
  if (!overrides[key]) overrides[key] = {};

  overrides[key].balcaoRaquel = checkbox.checked === true;
  saveOverrides(overrides);

  render();
}
</script>

</body>
</html>
